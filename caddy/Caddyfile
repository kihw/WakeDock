# WakeDock Dynamic Caddyfile
# This file will be dynamically updated by WakeDock
# Static configuration for WakeDock itself

{
    admin :2019
}

# WakeDock Dashboard  
admin.mtool.ovh {
    reverse_proxy dashboard:3000 {
        header_up Host {upstream_hostport}
        header_up X-Real-IP {remote_host}
        header_up X-Forwarded-For {remote_host}
        header_up X-Forwarded-Proto {scheme}
    }
}

# WakeDock API
api.mtool.ovh {
    reverse_proxy wakedock:8000 {
        header_up Host {upstream_hostport}
        header_up X-Real-IP {remote_host}
        header_up X-Forwarded-For {remote_host}
        header_up X-Forwarded-Proto {scheme}
    }
}

# Default landing page
localhost {
    reverse_proxy dashboard:3000 {
        header_up Host {upstream_hostport}
        header_up X-Real-IP {remote_host}
        header_up X-Forwarded-For {remote_host}
        header_up X-Forwarded-Proto {scheme}
    }
}

# Dynamic service configurations will be appended below this line
# --- WAKEDOCK MANAGED SERVICES ---
