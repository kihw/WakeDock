# WakeDock Development Environment Configuration
# This file is used for development mode: ./deploy-compose.sh --dev

# ===============================
# Application Settings
# ===============================
ENV=development
WAKEDOCK_DEBUG=true
WAKEDOCK_LOG_LEVEL=DEBUG
WAKEDOCK_RELOAD=true
NODE_ENV=development

# ===============================
# Service Restart Policy
# ===============================
RESTART_POLICY=unless-stopped

# ===============================
# Network Configuration
# ===============================
WAKEDOCK_NETWORK=caddy_net

# ===============================
# Port Configuration
# ===============================
WAKEDOCK_CORE_PORT=8000
DASHBOARD_PORT=3000
POSTGRES_PORT=5432
REDIS_PORT=6379
CADDY_HTTP_PORT=80
CADDY_HTTPS_PORT=443
CADDY_ADMIN_PORT=2019

# ===============================
# Domain Configuration
# ===============================
DOMAIN=localhost
PUBLIC_API_URL=http://localhost
WAKEDOCK_API_URL=http://wakedock-core:8000

# ===============================
# Development Security (NOT for production)
# ===============================
JWT_SECRET_KEY=dev-jwt-secret-key-change-for-production
POSTGRES_USER=wakedock_dev
POSTGRES_DB=wakedock_dev
POSTGRES_PASSWORD=dev_password_123
REDIS_PASSWORD=dev_redis_123

# ===============================
# Docker Integration  
# ===============================
DOCKER_SOCKET_PATH=/var/run/docker.sock

# ===============================
# Caddy Configuration
# ===============================
CADDY_AUTO_HTTPS=off
CADDY_ADMIN_API_ENABLED=true
CADDY_ADMIN_IP=0.0.0.0

# ===============================
# Volume Paths (Development data)
# ===============================
WAKEDOCK_BASE_DIR=./data/dev

# Core service data directories
WAKEDOCK_CORE_DATA=./data/dev/wakedock-core
WAKEDOCK_CONFIG_DIR=./config
WAKEDOCK_LOGS_DIR=./data/dev/logs

# Database data directories
POSTGRES_DATA_DIR=./data/dev/postgres
REDIS_DATA_DIR=./data/dev/redis

# Web services data directories
CADDY_DATA_DIR=./data/dev/caddy
CADDY_CONFIG_DIR=./data/dev/caddy-config
CADDY_CONFIG_VOLUME=./data/dev/caddy-volume
CADDY_LOGS_DIR=./data/dev/caddy-logs
DASHBOARD_DATA_DIR=./data/dev/dashboard

# ===============================
# Development Features
# ===============================
# Hot reloading
CHOKIDAR_USEPOLLING=true
HMR_PORT=24678

# Debug ports
DEBUG_PORT=5678

# ===============================
# Monitoring & Logging (Development)
# ===============================
LOG_LEVEL=DEBUG
LOG_FORMAT=console

# ===============================
# CORS for Development
# ===============================
CORS_ALLOW_ORIGINS=["http://localhost:3000", "http://localhost:80", "http://127.0.0.1:3000", "http://127.0.0.1:80"]
CORS_ALLOW_CREDENTIALS=true
CSRF_PROTECTION=false

# ===============================
# Performance (Relaxed for dev)
# ===============================
API_WORKERS=1
API_WORKER_TIMEOUT=60
DB_POOL_SIZE=5
REDIS_POOL_SIZE=3

# Rate limiting (more permissive for dev)
RATE_LIMIT_PER_MINUTE=1000
RATE_LIMIT_BURST=100